<div class="pin-manager-container">
  <div class="left-section">
    <app-map class="map-section"></app-map>
  </div>
  <div class="right-section">
    <div class="edit-area">
      <button
        class="btn -margin-bx5"
        *ngIf="!isCreatedMode"
        (click)="addPinClicked($event)"
      >
        Add Pin
      </button>
      <button
        class="btn -margin-bx5"
        *ngIf="isCreatedMode"
        (click)="editPinClicked($event)"
      >
        View Pin
      </button>
      <div class="view-table" *ngIf="!isCreatedMode">
        <div *ngIf="!isCreatedMode" class="add-pin-header">View Pin</div>
        <table *ngIf="!isCreatedMode" class="pin-manager-table">
          <tr class="table-header-row row">
            <th class="cell"></th>
            <th class="cell">Id</th>
            <th class="cell">Pin(x)</th>
            <th class="cell">Pin(Y)</th>
            <th class="cell">Box(x)</th>
            <th class="cell">Box(y)</th>
            <th class="cell">Edit</th>
            <th class="cell">Del</th>
          </tr>
          <ng-container *ngFor="let i of pinsPosition; let in = index">
            <tr class="table-row row">
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.index }}</div>
                <div *ngIf="i.edit">
                  <input class="edit-input" *ngIf="i.edit" [value]="i.index" />
                </div>
              </td>
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.stationId }}</div>
                <div *ngIf="i.edit">
                  <input
                    class="edit-input"
                    *ngIf="i.edit"
                    [value]="i.stationId"
                  />
                </div>
              </td>
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.x }}</div>
                <input class="edit-input" *ngIf="i.edit" [value]="i.x" />
              </td>
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.y }}</div>
                <input class="edit-input" *ngIf="i.edit" [value]="i.y" />
              </td>
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.tooltipX }}</div>
                <input class="edit-input" *ngIf="i.edit" [value]="i.tooltipX" />
              </td>
              <td class="cell">
                <div *ngIf="!i.edit">{{ i.tooltipY }}</div>
                <input class="edit-input" *ngIf="i.edit" [value]="i.tooltipY" />
              </td>
              <td class="cell">
                <svg
                  *ngIf="!i.edit"
                  [id]="i.stationId"
                  (click)="onEditClicked($event)"
                  class="edit-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  version="1.1"
                  id="Capa_1"
                  x="0px"
                  y="0px"
                  viewBox="0 0 477.873 477.873"
                  style="enable-background: new 0 0 477.873 477.873"
                  xml:space="preserve"
                >
                  <path
                    d="M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2    c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067    S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2    c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z"
                  />
                  <path
                    d="M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937    c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585    c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13    l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z M434.603,87.419L212.736,309.286l-66.287,22.135l22.067-66.202    L390.468,43.353c12.202-12.178,31.967-12.158,44.145,0.044c5.817,5.829,9.095,13.72,9.12,21.955    C443.754,73.631,440.467,81.575,434.603,87.419z"
                  />
                </svg>
                <button
                  *ngIf="i.edit"
                  [id]="i.stationId"
                  class="btn edit-done-btn"
                  (click)="onEditDoneClicked($event)"
                >
                  บันทึก
                </button>
              </td>
              <td class="cell">
                <svg
                  [id]="i.stationId"
                  (click)="onDeleteClicked($event)"
                  class="delete-icon"
                  fill="red"
                  xmlns="http://www.w3.org/2000/svg"
                  height="427pt"
                  viewBox="-40 0 427 427.00131"
                  width="427pt"
                >
                  <path
                    d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  />
                  <path
                    d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  />
                  <path
                    d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"
                  />
                  <path
                    d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  />
                </svg>
              </td>
            </tr>
          </ng-container>
        </table>
      </div>

      <section id="add-pin" *ngIf="isCreatedMode">
        <form
          class="form"
          [formGroup]="createform"
          (ngSubmit)="onSubmit($event)"
        >
          <div class="add-pin-header">Add Pin</div>

          <input
            class="add-input"
            formControlName="stationId"
            placeholder="รหัสสถานี"
          />

          <input
            class="add-input"
            formControlName="province"
            placeholder="จังหวัด"
          />

          <input
            class="add-input"
            type="number"
            formControlName="x"
            placeholder="ตำแหน่งหมุดแกน x"
          />

          <input
            class="add-input"
            type="number"
            formControlName="y"
            placeholder="ตำแหน่งหมุดแกน y"
          />

          <input
            class="add-input"
            type="number"
            formControlName="tooltipX"
            placeholder="ตำแหน่งคำอธิบายแกน x"
          />

          <input
            class="add-input"
            type="number"
            formControlName="tooltipY"
            placeholder="ตำแหน่งคำอธิบายแกน y"
          />
          <div class="btn-group">
            <button type="submit" class="btn -margin-rx5">ตัวอย่าง</button>
            <button type="submit" class="btn" (click)="onSaveClicked($event)">
              บันทึก
            </button>
          </div>
        </form>
      </section>
    </div>
    <span
      class="pin-section"
      style="position: absolute; width: 32px; height: 36px"
      *ngIf="isCreatedMode"
    >
      <div class="pin-index">x</div>
      <svg
        style="width: 32px; height: 36px"
        stroke="black"
        stroke-width="1"
        class="pin"
        xmlns="http://www.w3.org/2000/svg"
        enable-background="new 0 0 24 24"
        height="36"
        viewBox="0 0 24 24"
        width="32"
      >
        <path
          d="m12 0c-4.962 0-9 4.066-9 9.065 0 7.103 8.154 14.437 8.501 14.745.143.127.321.19.499.19s.356-.063.499-.189c.347-.309 8.501-7.643 8.501-14.746 0-4.999-4.038-9.065-9-9.065zm0 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"
        />
      </svg>
    </span>
    <div class="tooltip-container mock-tooltip" *ngIf="isCreatedMode">
      <div class="index">xx</div>
      <div class="location">xxxxxxxx xxxxxx</div>
      <div class="content">
        <div class="value">xx</div>
      </div>
    </div>
  </div>
</div>
